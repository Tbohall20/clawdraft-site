<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clawdraft ‚Äî Brand Voice Demo</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #0a0a0a;
    --surface: #111111;
    --border: #1a1a1a;
    --blue: #3b82f6;
    --green: #25d366;
    --text: #ffffff;
    --muted: #888888;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: system-ui, -apple-system, sans-serif;
    min-height: 700px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 40px 20px 60px;
  }

  .widget-wrap {
    width: 100%;
    max-width: 580px;
  }

  /* Header */
  .widget-header {
    text-align: center;
    margin-bottom: 32px;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 12px;
    background: rgba(59,130,246,0.1);
    border: 1px solid rgba(59,130,246,0.25);
    border-radius: 100px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--blue);
    margin-bottom: 14px;
  }

  .badge-dot {
    width: 6px;
    height: 6px;
    background: var(--blue);
    border-radius: 50%;
    animation: dotPulse 2s infinite;
  }

  @keyframes dotPulse {
    0%,100% { opacity: 1; }
    50%      { opacity: 0.3; }
  }

  .widget-header h1 {
    font-size: 28px;
    font-weight: 700;
    letter-spacing: -0.5px;
    line-height: 1.2;
    margin-bottom: 10px;
  }

  .widget-header p {
    font-size: 15px;
    color: var(--muted);
    line-height: 1.6;
  }

  /* Form card */
  .form-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .q-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--muted);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }

  .q-text {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 10px;
    line-height: 1.4;
  }

  .form-input {
    width: 100%;
    background: #151515;
    border: 1px solid #222;
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 14px;
    color: var(--text);
    font-family: inherit;
    outline: none;
    transition: border-color 0.2s;
  }

  .form-input::placeholder { color: var(--muted); }

  .form-input:focus {
    border-color: var(--blue);
    box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
  }

  /* Radio group */
  .radio-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .radio-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: #151515;
    border: 1px solid #222;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
    color: var(--muted);
  }

  .radio-label:hover {
    border-color: #333;
    color: var(--text);
  }

  .radio-label input { display: none; }

  .radio-label.checked {
    border-color: var(--blue);
    background: rgba(59,130,246,0.08);
    color: var(--blue);
  }

  .radio-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid #444;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .radio-label.checked .radio-dot {
    border-color: var(--blue);
    background: var(--blue);
  }

  .radio-label.checked .radio-dot::after {
    content: '';
    width: 6px;
    height: 6px;
    background: #fff;
    border-radius: 50%;
  }

  /* Checkbox group */
  .checkbox-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: #151515;
    border: 1px solid #222;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
    color: var(--muted);
  }

  .checkbox-label:hover {
    border-color: #333;
    color: var(--text);
  }

  .checkbox-label input { display: none; }

  .checkbox-label.checked {
    border-color: var(--blue);
    background: rgba(59,130,246,0.08);
    color: var(--blue);
  }

  .checkbox-box {
    width: 16px;
    height: 16px;
    border-radius: 4px;
    border: 2px solid #444;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
    font-size: 10px;
    font-weight: 700;
  }

  .checkbox-label.checked .checkbox-box {
    border-color: var(--blue);
    background: var(--blue);
    color: #fff;
  }

  .divider {
    height: 1px;
    background: var(--border);
  }

  /* Submit button */
  .submit-btn {
    width: 100%;
    padding: 15px;
    background: var(--blue);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }

  .submit-btn:hover {
    background: #2563eb;
    transform: translateY(-1px);
    box-shadow: 0 8px 24px rgba(59,130,246,0.3);
  }

  .submit-btn:active { transform: translateY(0); }

  /* Loading state */
  .loading-overlay {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 40px;
    text-align: center;
  }

  .loading-overlay.show { display: flex; }

  .spinner {
    width: 48px;
    height: 48px;
    border: 3px solid rgba(59,130,246,0.2);
    border-top-color: var(--blue);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .loading-steps {
    display: flex;
    flex-direction: column;
    gap: 8px;
    text-align: left;
    min-width: 240px;
  }

  .loading-step {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    color: var(--muted);
    opacity: 0;
    transform: translateY(6px);
    transition: all 0.4s ease;
  }

  .loading-step.done {
    opacity: 1;
    transform: none;
    color: var(--text);
  }

  .loading-step .ls-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(37,211,102,0.15);
    color: var(--green);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
  }

  /* Preview section */
  .preview-section {
    display: none;
    flex-direction: column;
    gap: 20px;
    animation: fadeUp 0.5s ease forwards;
  }

  .preview-section.show { display: flex; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: none; }
  }

  .preview-header {
    text-align: center;
    padding: 8px 0 16px;
    border-bottom: 1px solid var(--border);
  }

  .preview-header h2 {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .preview-header p {
    font-size: 13px;
    color: var(--muted);
  }

  .preview-card {
    background: #151515;
    border: 1px solid #1e1e1e;
    border-radius: 12px;
    overflow: hidden;
  }

  .preview-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    border-bottom: 1px solid #1a1a1a;
    background: #111;
  }

  .preview-card-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
  }

  .preview-card-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
  }

  .preview-card-body {
    padding: 14px 16px;
    font-size: 13.5px;
    color: #ccc;
    line-height: 1.65;
    white-space: pre-line;
  }

  .tweet-item {
    padding: 10px 0;
    border-bottom: 1px solid #1a1a1a;
    font-size: 13.5px;
    color: #ccc;
    line-height: 1.6;
  }

  .tweet-item:last-child { border-bottom: none; padding-bottom: 0; }

  .tweet-num {
    font-size: 10px;
    font-weight: 700;
    color: var(--blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }

  /* CTA footer */
  .cta-footer {
    background: rgba(59,130,246,0.06);
    border: 1px solid rgba(59,130,246,0.15);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .cta-footer p {
    font-size: 14px;
    color: var(--muted);
    line-height: 1.6;
  }

  .cta-footer strong {
    color: var(--text);
  }

  .cta-btn {
    display: inline-block;
    padding: 12px 28px;
    background: var(--blue);
    color: #fff;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
    font-family: inherit;
  }

  .cta-btn:hover {
    background: #2563eb;
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(59,130,246,0.3);
  }

  .highlight {
    color: var(--blue);
    font-weight: 600;
  }
</style>
</head>
<body>

<div class="widget-wrap">

  <div class="widget-header">
    <div class="badge"><div class="badge-dot"></div> Live Demo</div>
    <h1>See your content<br>before you commit</h1>
    <p>Answer 6 quick questions. We'll generate your first week's content in real-time.</p>
  </div>

  <!-- Form card -->
  <div class="form-card" id="formCard">

    <!-- Q1 -->
    <div>
      <div class="q-label">Question 1</div>
      <div class="q-text">What's your name?</div>
      <input class="form-input" id="q1" type="text" placeholder="e.g. Jordan Blake" autocomplete="off">
    </div>

    <div class="divider"></div>

    <!-- Q2 -->
    <div>
      <div class="q-label">Question 2</div>
      <div class="q-text">What do you create content about?</div>
      <input class="form-input" id="q2" type="text" placeholder="e.g. productivity for solopreneurs" autocomplete="off">
    </div>

    <div class="divider"></div>

    <!-- Q3 -->
    <div>
      <div class="q-label">Question 3</div>
      <div class="q-text">Who is your audience?</div>
      <input class="form-input" id="q3" type="text" placeholder="e.g. founders, freelancers, solo operators" autocomplete="off">
    </div>

    <div class="divider"></div>

    <!-- Q4 -->
    <div>
      <div class="q-label">Question 4</div>
      <div class="q-text">What's your content tone?</div>
      <div class="radio-group" id="toneGroup">
        <label class="radio-label">
          <input type="radio" name="tone" value="Contrarian">
          <div class="radio-dot"></div>
          Contrarian
        </label>
        <label class="radio-label">
          <input type="radio" name="tone" value="Educational">
          <div class="radio-dot"></div>
          Educational
        </label>
        <label class="radio-label">
          <input type="radio" name="tone" value="Inspirational">
          <div class="radio-dot"></div>
          Inspirational
        </label>
        <label class="radio-label">
          <input type="radio" name="tone" value="Direct">
          <div class="radio-dot"></div>
          Direct
        </label>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Q5 -->
    <div>
      <div class="q-label">Question 5</div>
      <div class="q-text">Which platforms do you post on?</div>
      <div class="checkbox-group" id="platformGroup">
        <label class="checkbox-label">
          <input type="checkbox" value="X/Twitter">
          <div class="checkbox-box"></div>
          ùïè Twitter
        </label>
        <label class="checkbox-label">
          <input type="checkbox" value="LinkedIn">
          <div class="checkbox-box"></div>
          LinkedIn
        </label>
        <label class="checkbox-label">
          <input type="checkbox" value="Newsletter">
          <div class="checkbox-box"></div>
          Newsletter
        </label>
        <label class="checkbox-label">
          <input type="checkbox" value="YouTube">
          <div class="checkbox-box"></div>
          YouTube
        </label>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Q6 -->
    <div>
      <div class="q-label">Question 6</div>
      <div class="q-text">What's your biggest content challenge?</div>
      <input class="form-input" id="q6" type="text" placeholder="e.g. consistency, finding angles, time" autocomplete="off">
    </div>

    <button class="submit-btn" id="submitBtn" onclick="handleSubmit()">
      Generate My Content Preview ‚Üí
    </button>
  </div>

  <!-- Loading overlay -->
  <div class="form-card loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
    <div style="font-size:16px; font-weight:600; color:var(--text)">Building your preview...</div>
    <div class="loading-steps" id="loadingSteps">
      <div class="loading-step" id="ls0">
        <div class="ls-icon">‚úì</div>
        Scanning Reddit trends for your niche
      </div>
      <div class="loading-step" id="ls1">
        <div class="ls-icon">‚úì</div>
        Calibrating brand voice profile
      </div>
      <div class="loading-step" id="ls2">
        <div class="ls-icon">‚úì</div>
        Generating X thread &amp; newsletter
      </div>
      <div class="loading-step" id="ls3">
        <div class="ls-icon">‚úì</div>
        Drafting LinkedIn + YouTube hook
      </div>
    </div>
  </div>

  <!-- Preview section -->
  <div id="previewSection" class="preview-section">

    <div class="form-card">
      <div class="preview-header">
        <h2>‚ú® Your Personalized Preview</h2>
        <p>Generated for <span class="highlight" id="previewName">you</span> ¬∑ based on your brand voice</p>
      </div>

      <!-- X Thread -->
      <div class="preview-card">
        <div class="preview-card-header">
          <div class="preview-card-icon" style="background:rgba(29,161,242,0.15)">ùïè</div>
          <div class="preview-card-title">X / Twitter Thread</div>
        </div>
        <div class="preview-card-body">
          <div class="tweet-item">
            <div class="tweet-num">Tweet 1 of 5</div>
            <div id="pt1">Fill out the form to generate your personalised thread.</div>
          </div>
          <div class="tweet-item">
            <div class="tweet-num">Tweet 2 of 5</div>
            <div id="pt2"></div>
          </div>
          <div class="tweet-item">
            <div class="tweet-num">Tweet 3 of 5</div>
            <div id="pt3"></div>
          </div>
          <div class="tweet-item">
            <div class="tweet-num">Tweet 4 of 5</div>
            <div id="pt4"></div>
          </div>
          <div class="tweet-item">
            <div class="tweet-num">Tweet 5 of 5</div>
            <div id="pt5"></div>
          </div>
        </div>
      </div>

      <!-- Newsletter -->
      <div class="preview-card">
        <div class="preview-card-header">
          <div class="preview-card-icon" style="background:rgba(59,130,246,0.15)">üìß</div>
          <div class="preview-card-title">Newsletter Intro</div>
        </div>
        <div class="preview-card-body" id="pNewsletter">Hey [Name],

There's a tax on your time that doesn't show up in your calendar.

It's called tool-switching ‚Äî and for most solopreneurs, it's eating 60-90 minutes every single day.</div>
      </div>

      <!-- LinkedIn -->
      <div class="preview-card">
        <div class="preview-card-header">
          <div class="preview-card-icon" style="background:rgba(10,102,194,0.15)">üíº</div>
          <div class="preview-card-title">LinkedIn Post</div>
        </div>
        <div class="preview-card-body" id="pLinkedin">Hot take: The most productive people I know use the fewest tools.

Not the most sophisticated stack. Not the most optimized system. The fewest tools.

I've been watching a thread blow up this week ‚Äî 4K upvotes ‚Äî about abandoning Notion for plain text.</div>
      </div>

      <!-- YouTube -->
      <div class="preview-card">
        <div class="preview-card-header">
          <div class="preview-card-icon" style="background:rgba(255,0,0,0.12)">üé¨</div>
          <div class="preview-card-title">YouTube Hook</div>
        </div>
        <div class="preview-card-body" id="pYoutube">"The productivity software industry is a $96 billion business ‚Äî and it needs you to feel disorganized. If you ever felt truly on top of your work, you'd stop buying their apps, their courses, their upgrades."</div>
      </div>

    </div>

    <!-- CTA -->
    <div class="cta-footer">
      <p><strong>This is a preview of your first week's content.</strong><br>Real pipeline runs daily ‚Äî fresh Reddit angles, your voice, delivered to WhatsApp every morning.</p>
      <button class="cta-btn" onclick="resetDemo()">Try another voice ‚Üí</button>
    </div>

  </div>

</div>

<script>
// Radio button handling
document.querySelectorAll('.radio-label').forEach(label => {
  label.addEventListener('click', function() {
    document.querySelectorAll('.radio-label').forEach(l => l.classList.remove('checked'));
    this.classList.add('checked');
    this.querySelector('input').checked = true;
  });
});

// Checkbox handling
document.querySelectorAll('.checkbox-label').forEach(label => {
  label.addEventListener('click', function() {
    const input = this.querySelector('input');
    input.checked = !input.checked;
    this.classList.toggle('checked', input.checked);
    const box = this.querySelector('.checkbox-box');
    box.textContent = input.checked ? '‚úì' : '';
  });
});

// Content templates by tone ‚Äî each one adapts to name, niche, and audience
var TEMPLATES = {
  'Contrarian': {
    tweets: function(n, niche, aud) { return [
      `The ${niche} advice everyone gives is wrong.\n\nI tested it for 6 months. Here's what I found instead: üßµ`,
      `Everyone in ${niche} tells you to do more. More content, more systems, more optimization.\n\nMost of it is noise. Here's what actually moves the needle.`,
      `I asked 50 ${aud} what they changed that made the biggest difference.\n\nNone of them said "I added another tool."`,
      `The ${niche} space rewards complexity. Long frameworks, detailed systems, endless tactics.\n\nBut the people actually winning? They've stripped everything back.`,
      `Hot take: the best thing you can do for your ${niche} results this week is delete something, not add something.`
    ]; },
    newsletter: function(n, niche, aud) {
      return `Hey ${n},\n\nEverybody in ${niche} is selling you a system. I've bought most of them.\n\nHere's what I actually learned: the more I added, the slower I got. Not because I was lazy ‚Äî because complexity has a cost that nobody talks about.\n\nThis week I want to share the one change that made more difference than everything else combined. And it involves doing less, not more.`;
    },
    linkedin: function(n, niche, aud) {
      return `Unpopular opinion: most ${niche} advice is making you worse, not better.\n\nNot because it's wrong in theory. Because it's designed for people with unlimited time ‚Äî and ${aud} don't have that.\n\nI've watched too many people spend more time on their system than their actual work.\n\nThe unlock isn't a better framework. It's fewer decisions. Fewer tools. Fewer things to maintain.\n\nWhat's one piece of "${niche}" advice you've stopped following? I'd genuinely like to know.`;
    },
    youtube: function(n, niche, aud) {
      return `"Everything the ${niche} industry tells you to do ‚Äî I tried all of it. And I'm going to show you exactly where it started making things worse instead of better. This isn't theory. These are my actual numbers."`;
    }
  },
  'Educational': {
    tweets: function(n, niche, aud) { return [
      `A thread on what actually works in ${niche} in 2025 ‚Äî backed by data, not vibes üßµ`,
      `Most ${aud} get stuck at the same three points. Understanding why is the first step to breaking through.\n\nHere's what the research actually says:`,
      `The ${niche} fundamentals nobody teaches:\n\n‚Äî What the top performers do differently\n‚Äî Why conventional advice falls short\n‚Äî The one metric that actually predicts results`,
      `I analyzed 6 months of data from ${aud} at different stages.\n\nThe pattern is consistent and almost nobody talks about it.`,
      `The most valuable thing you can do for your ${niche} results this week:\n\nAudit what you're measuring, not just what you're doing.`
    ]; },
    newsletter: function(n, niche, aud) {
      return `Hey ${n},\n\nI've been deep in ${niche} research this week and found something worth sharing.\n\nThere's a gap between what the ${aud} community talks about and what the data actually supports. It's not a small gap ‚Äî and once you see it, you can't unsee it.\n\nThis issue breaks it down, step by step.`;
    },
    linkedin: function(n, niche, aud) {
      return `3 things I wish someone had told me earlier about ${niche}:\n\n1. The starting point matters less than most people think\n2. Consistency beats optimization every single time\n3. The ${aud} who progress fastest are asking different questions, not working harder\n\nWhat would you add to this list?`;
    },
    youtube: function(n, niche, aud) {
      return `"I spent 3 months going deep on what separates the top 1% in ${niche} from everyone else. The answer surprised me ‚Äî and it has nothing to do with talent, resources, or the tools they use."`;
    }
  },
  'Inspirational': {
    tweets: function(n, niche, aud) { return [
      `A year ago I was stuck. Same problems, same ceiling, same frustration with ${niche}.\n\nHere's what changed everything üßµ`,
      `The moment I stopped comparing my ${niche} journey to everyone else's was the moment things started moving.\n\nComparison is the enemy of momentum.`,
      `Nobody talks about the quiet phase. When you're doing the work, nobody's watching, and the results haven't shown up yet.\n\nThat phase is where ${aud} are actually built.`,
      `What got you here won't get you there.\n\nIn ${niche}, the skills that create the first breakthrough are different from the ones that create the next one.`,
      `The best time to invest in your ${niche} foundation was two years ago.\n\nThe second best time is now. What's one thing you're committing to this week?`
    ]; },
    newsletter: function(n, niche, aud) {
      return `Hey ${n},\n\nI want to start this week with something that's been on my mind.\n\nEvery ${aud} I admire went through a phase where they couldn't see the progress. Where the work felt disconnected from the results. Where it was easier to wonder if it was worth it than to keep going.\n\nThey kept going.\n\nThis issue is about what that looks like in practice ‚Äî and why the quiet phases matter more than the visible ones.`;
    },
    linkedin: function(n, niche, aud) {
      return `The ${aud} I respect most all have one thing in common:\n\nThey kept showing up when there was no external reason to.\n\nNo audience yet. No feedback yet. No proof it was working yet.\n\nJust the work, and the belief that it mattered.\n\nThat's the foundation ${niche} is actually built on.\n\nWho in your world embodies this? Tag them.`;
    },
    youtube: function(n, niche, aud) {
      return `"I want to tell you about a turning point in my ${niche} journey ‚Äî the moment I stopped looking for the shortcut and started building the foundation. It changed everything. And I think it might be exactly what you need to hear today."`;
    }
  },
  'Direct': {
    tweets: function(n, niche, aud) { return [
      `Here's what's actually blocking your ${niche} results. No fluff. üßµ`,
      `The ${aud} who are winning at ${niche} right now are doing three things.\n\nMost people are doing zero of them.`,
      `Stop overthinking ${niche} strategy.\n\nPick one thing. Do it for 90 days. Measure it.\n\nThat's the entire playbook.`,
      `The honest truth about ${niche}: it works, but only if you're consistent longer than feels comfortable.\n\nMost people quit at the 60-day mark. Don't.`,
      `Action this week: take one thing off your ${niche} to-do list and actually execute on it.\n\nSpeed beats perfection. Every time.`
    ]; },
    newsletter: function(n, niche, aud) {
      return `Hey ${n},\n\nNo preamble this week. Here's what I've learned about ${niche} that's worth your time:\n\nThe ${aud} who make real progress have one thing in common ‚Äî they decide fast and adjust faster. They're not waiting for the perfect plan.\n\nThis issue is about what that looks like in practice, with specific examples you can use today.`;
    },
    linkedin: function(n, niche, aud) {
      return `Blunt take on ${niche}:\n\nMost of the complexity is manufactured.\n\nThe ${aud} getting results aren't using complicated systems. They picked a direction, cut the noise, and executed.\n\nYou probably already know what you need to do. The question is whether you'll do it.`;
    },
    youtube: function(n, niche, aud) {
      return `"I'm going to skip the intro and get straight to it ‚Äî here are the three things that will actually move the needle on your ${niche} results this year. Not theory. Not motivation. Specifics."`;
    }
  }
};

function handleSubmit() {
  const name = document.getElementById('q1').value.trim() || 'there';
  const niche = document.getElementById('q2').value.trim() || 'your niche';
  const audience = document.getElementById('q3').value.trim() || 'your audience';
  const toneInput = document.querySelector('input[name="tone"]:checked');
  const tone = toneInput ? toneInput.value : 'Direct';

  document.getElementById('formCard').style.display = 'none';

  const lo = document.getElementById('loadingOverlay');
  lo.classList.add('show');

  ['ls0','ls1','ls2','ls3'].forEach((id, i) => {
    setTimeout(() => document.getElementById(id).classList.add('done'), 300 + i * 450);
  });

  setTimeout(() => {
    lo.classList.remove('show');
    showPreview(name, niche, audience, tone);
  }, 2400);
}

function showPreview(name, niche, audience, tone) {
  const tmpl = TEMPLATES[tone] || TEMPLATES['Direct'];
  const tweets = tmpl.tweets(name, niche, audience);

  document.getElementById('previewName').textContent = name;

  // Build tweet HTML
  const tweetContainer = document.querySelector('.preview-card-body .tweet-item')
    ? document.querySelector('.preview-card-body') : null;

  // Replace tweet placeholders
  tweets.forEach((text, i) => {
    const el = document.getElementById('pt' + (i+1));
    if (el) el.textContent = text;
  });

  document.getElementById('pNewsletter').textContent = tmpl.newsletter(name, niche, audience);
  document.getElementById('pLinkedin').textContent = tmpl.linkedin(name, niche, audience);
  document.getElementById('pYoutube').textContent = tmpl.youtube(name, niche, audience);

  document.getElementById('previewSection').classList.add('show');
  window.scrollTo({ top: 0, behavior: 'smooth' });

  if (typeof reportHeight === 'function') setTimeout(reportHeight, 400);
}

function resetDemo() {
  document.getElementById('formCard').style.display = 'flex';
  document.getElementById('previewSection').classList.remove('show');

  // Reset loading steps
  ['ls0','ls1','ls2','ls3'].forEach(id => {
    document.getElementById(id).classList.remove('done');
  });

  // Reset inputs
  ['q1','q2','q3','q6'].forEach(id => {
    document.getElementById(id).value = '';
  });
  document.querySelectorAll('.radio-label').forEach(l => l.classList.remove('checked'));
  document.querySelectorAll('.checkbox-label').forEach(l => {
    l.classList.remove('checked');
    l.querySelector('input').checked = false;
    l.querySelector('.checkbox-box').textContent = '';
  });

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Report height to parent iframe ‚Äî fires on load and after interactions
function reportHeight() {
  const h = document.documentElement.scrollHeight || document.body.scrollHeight;
  window.parent.postMessage({ iframeHeight: h }, '*');
}
setTimeout(reportHeight, 300);
setTimeout(reportHeight, 1000);
// Re-report after form submission reveals preview (longer content)
const origSubmit = window.submitForm;
if (typeof origSubmit === 'function') {
  window.submitForm = function() { origSubmit(); setTimeout(reportHeight, 800); };
}
</script>
</body>
</html>
